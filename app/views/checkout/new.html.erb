<h1>Checkout</h1>

<%= form_with url: checkout_index_path, method: :post, local: true do %>
  <h2>Shipping Details</h2>

  <p><strong>Select your province:</strong></p>
  <%= select_tag :province_id, options_from_collection_for_select(@provinces, :id, :name, @province&.id) %>

  <h2>Your Cart</h2>
  <ul>
    <% @cart.items.each do |item| %>
      <li>
        <%= item[:product].name %> -
        Qty: <%= item[:quantity] %> -
        $<%= (item[:product].price * item[:quantity]).round(2) %>
      </li>
    <% end %>
  </ul>

  <p><strong>Subtotal:</strong> $<%= @subtotal.round(2) %></p>
  <p><strong>GST:</strong> $<%= (@subtotal * @gst).round(2) %></p>
  <p><strong>PST:</strong> $<%= (@subtotal * @pst).round(2) %></p>
  <p><strong>HST:</strong> $<%= (@subtotal * @hst).round(2) %></p>
  <p><strong>Total (with taxes):</strong> $<%= @total.round(2) %></p>

  <%= submit_tag "Place Order", class: "btn btn-primary" %>
<% end %>
